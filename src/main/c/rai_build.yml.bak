# lab: LDBC-COMMUNITY-DETECTION
rai:
  version: 0.2
  image: zhongbozhu/ece508-cuda-graph-analytics-rai:latest
resources:
  cpu:
    architecture: amd64
  gpu:
    count: 1
commands:
  build:
    - export rootdir=/cuda-graph-analytics/ldbc_graphalytics_platforms_graphblas/graphalytics-1.10.0-graphblas-0.1.0-SNAPSHOT
    - rm -rf ${rootdir}/src/main/c
    - rm ${rootdir}/config/benchmark.properties
    - cp -r /src ${rootdir}/src/main/c
    - cd ${rootdir} && /bin/bash bin/sh/build-wrapper-only.sh
    - cp /src/benchmark-configs/benchmark.properties ${rootdir}/config/
    - cp /src/benchmark-configs/cdlp.properties ${rootdir}/config/
    - cd ${rootdir} && bin/sh/run-benchmark.sh
    - cp ${rootdir}/report/ /build